<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JanaSainik Grievance Portal</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f8f9fa;
    }
    .hero {
      background-color: #80030f;
      color: white;
      padding: 2rem 1rem;
      text-align: center;
      border-radius: 0 0 2rem 2rem;
    }
    .hero-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    .hero img {
      height: 100px;
    }
    .card {
      border-radius: 1rem;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    .btn-danger {
      background-color: #72000b;
    }
    footer {
      background-color: #000000;
      color: white;
      padding: 1rem 0;
      text-align: center;
      border-radius: 2rem 2rem 0 0;
    }
    #backToTopBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #990211;
      color: white;
      border: none;
      border-radius: 50%;
      width: 45px;
      height: 45px;
      font-size: 20px;
      display: none;
      z-index: 999;
    }
    .required::after {
      content: "*";
      color: red;
      margin-left: 4px;
    }
  </style>
</head>
<body>
  <div class="hero">
    <div class="container hero-content">
      <img src="logo.png" alt="Logo" />
      <div class="text-center flex-grow-1">
        <h1>Janasainiks Grievance Portal</h1>
        <p class="lead mb-0">Standing with Every Janasainik in Their Struggles</p>
      </div>
      <img src="pawankalyan.jpg" alt="Pawan Kalyan" style="border-radius: 10%" />
    </div>
  </div>

  <div class="container mt-5 mb-5">
    <div class="row justify-content-center">
      <div class="col-md-10">
        <div class="card p-4">
          <h3 class="mb-4 text-center">Submit Your Grievance</h3>
          <form id="grievanceForm">
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="name" class="form-label required">Full Name</label>
                <input type="text" class="form-control" id="name" required />
              </div>
              <div class="col-md-6">
                <label for="phone" class="form-label required">Phone Number</label>
                <input type="tel" class="form-control" id="phone" pattern="[0-9]{10}" required />
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-md-4">
                <label for="district" class="form-label required">District</label>
                <select class="form-select" id="district" required>
                  <option value="">-- Select District --</option>
                </select>
              </div>
              <div class="col-md-4">
                <label for="mandal" class="form-label required">Mandal</label>
                <select class="form-select" id="mandal" required>
                  <option value="">-- Select Mandal --</option>
                </select>
              </div>
              <div class="col-md-4">
                <label for="village" class="form-label required">Village / Ward</label>
                <input type="text" class="form-control" id="village" required />
              </div>
            </div>

            <div class="mb-3">
              <label for="constituency" class="form-label required">Constituency</label>
              <select class="form-select" id="constituency" required>
                <option value="">-- Select Constituency --</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="category" class="form-label required">Issue Category</label>
              <select class="form-select" id="category" required>
                <option value="">-- Select Category --</option>
                <option>Local Leader Issue</option>
                <option>Program Access Issue</option>
                <option>Party Membership / Insurance Issue</option>
                <option>Issues with Alliance Parties</option>
                <option>Issue with MLA / Party Incharges</option>
                <option>Govt Schemes Allocation Issues</option>
                <option>Ground-Level Problems</option>
                <option>Other</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="message" class="form-label required">Describe Your Problem</label>
              <textarea class="form-control" id="message" rows="4" required></textarea>
            </div>

            <div class="mb-3">
              <label for="files" class="form-label">Upload Documents / Photos (optional)</label>
              <input type="file" id="files" class="form-control" multiple />
            </div>

            <button type="submit" class="btn btn-danger w-100">Submit Grievance</button>
          </form>

          <div class="alert alert-success mt-3 d-none" id="successAlert">
            Your grievance has been submitted successfully. Jai Jana Sena!
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <p>© 2025 JanaSainiks Grievance Desk</p>
    <p>
      Connect with us:
      <a href="#" class="text-white text-decoration-underline">Facebook</a> |
      <a href="#" class="text-white text-decoration-underline">Twitter</a> |
      <a href="#" class="text-white text-decoration-underline">Instagram</a>
    </p>
  </footer>

  <button id="backToTopBtn" onclick="scrollToTop()">↑</button>

  <!---------------------------------------------------Script Section -------------------------------------------------------------->
  <script>
    const districtsWithMandals = {
       "Anakapalli": ["Anakapalle", "Chodavaram", "Atchutapuram"],
  "Ananthapuramu": ["Gooty", "Hindupur", "Tadipatri"],
  "Bapatla": ["Chirala", "Repalle", "Vemuru"],
  "Chittoor": ["Puttur", "Nagari", "Palamaner"],
  "East Godavari": ["Rajahmundry Rural", "Rajanagaram", "Mandapeta"],
  "Eluru": ["Dwaraka Tirumala", "Bhimadole", "Jangareddygudem"],
  "Guntur": ["Chebrolu", "Duggirala","Guntur East","Guntur West","Medikonduru","Pedakakani","Ponnur","Pedanandipadu","Phirangipuram","Prathipadu","Tadikonda",
             "Thullur","Vatticherukuru","Mangalagiri","Tadepalle","Duggirala","Kollipara","Kakumanu","Tenali", "Pedakakani"],
  "Kakinada": ["Peddapuram", "Samatam Kothapalle", "Thondangi"],
  "Konaseema": ["Amalapuram", "Razole", "Mummidivaram"],
  "Krishna": ["Gudivada", "Pamarru", "Machilipatnam"],
  "Kurnool": ["Adoni", "Yemmiganur", "Nandikotkur"],
  "Manyam": ["Seethampeta", "Veeraghattam", "Palakonda"],
  "Nandyal": ["Banaganapalli", "Dhone", "Allagadda"],
  "Nellore": ["Atmakur", "Kovur", "Udayagiri"],
  "NTR": ["Vijayawada Rural", "Ibrahimpatnam", "Kanchikacherla"],
  "Palnadu": ["Macherla", "Narasaraopet", "Sattenapalle"],
  "Parvathipuram Manyam": ["Parvathipuram", "Salur", "Komarada"],
  "Prakasam": ["Markapur", "Kanigiri", "Kandukur"],
  "Srikakulam": ["Palasa", "Tekkali", "Srikakulam"],
  "Sri Potti Sriramulu Nellore": ["Kavali", "Sullurupeta", "Gudur"],
  "Sri Sathya Sai": ["Puttaparthi", "Penukonda", "Madakasira"],
  "Tirupati": ["Srikalahasti", "Tirupati Rural", "Renigunta"],
  "Visakhapatnam": ["Gajuwaka", "Bheemunipatnam", "Visakhapatnam Rural"],
  "Vizianagaram": ["Cheepurupalli", "Gantyada", "Vizianagaram"],
  "West Godavari": ["Nidadavole", "Tadepalligudem", "Tanuku"],
  "YSR Kadapa": ["Proddatur", "Pulivendula", "Rayachoti"]
        // ... all 26 districts with mandals should be listed here.....................
    };

    const constituencies = [
       "Adoni", "Alur", "Amalapuram", "Anakapalle", "Anantapur", "Araku Valley", "Atmakur", "Avanigadda",
        "Badvel", "Banaganapalli", "Bapatla", "Bhattiprolu", "Bheemunipatnam", "Bhimavaram", "Bobbili",
        "Cheepurupalli", "Chilakaluripet", "Chintalapudi", "Chirala", "Chittoor", "Darsi", "Dharmavaram",
        "Dharmavaram", "Elamanchili", "Eluru", "Gajapathinagaram", "Gajuwaka", "Gannavaram", "Giddalur",
        "Gopalapuram", "Gudur", "Guntakal", "Guntur East", "Guntur West", "Gurazala", "Ichchapuram",
        "Jaggampeta", "Jammalamadugu", "Kadapa", "Kadiri", "Kaikalur", "Kakinada City", "Kakinada Rural",
        "Kalyandurg", "Kandukur", "Kanigiri", "Kavali", "Kavali", "Kovur", "Kovvur", "Kurnool", "Machilipatnam",
        // ... include all 175 Assembly Constituencies......................
    ];

    const districtSelect = document.getElementById("district");
    const mandalSelect = document.getElementById("mandal");
    const constituencySelect = document.getElementById("constituency");

    for (const district in districtsWithMandals) {
      const option = document.createElement("option");
      option.value = district;
      option.text = district;
      districtSelect.appendChild(option);
    }

    districtSelect.addEventListener("change", () => {
      mandalSelect.innerHTML = '<option value="">-- Select Mandal --</option>';
      const selectedDistrict = districtSelect.value;
      const mandals = districtsWithMandals[selectedDistrict] || [];
      mandals.forEach((mandal) => {
        const option = document.createElement("option");
        option.value = mandal;
        option.text = mandal;
        mandalSelect.appendChild(option);
      });
    });

    constituencies.forEach((name) => {
      const option = document.createElement("option");
      option.value = name;
      option.text = name;
      constituencySelect.appendChild(option);
    });

    const scriptURL = "https://script.google.com/macros/s/YOUR_SCRIPT_ID_HERE/exec";

    document.getElementById("grievanceForm").addEventListener("submit", async function (e) {
      e.preventDefault();
      const form = e.target;
      const filesInput = document.getElementById("files");
      const files = filesInput.files;

      const filesData = [];
      if (files.length > 0) {
        for (let file of files) {
          const base64 = await toBase64(file);
          filesData.push({
            name: file.name,
            mimeType: file.type,
            data: base64.split(",")[1],
          });
        }
      }

      const payload = {
        name: form.name.value,
        phone: form.phone.value,
        district: form.district.value,
        mandal: form.mandal.value,
        village: form.village.value,
        constituency: form.constituency.value,
        category: form.category.value,
        message: form.message.value,
        files: filesData,
      };

      const response = await fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify(payload),
        headers: { "Content-Type": "application/json" },
      });

      const result = await response.json();
      if (result.status === "success") {
        document.getElementById("successAlert").classList.remove("d-none");
        form.reset();
      } else {
        alert("Error: " + result.message);
      }
    });

    function toBase64(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = () => resolve(reader.result);
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }

    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
